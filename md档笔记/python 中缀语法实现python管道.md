# python 中缀语法实现python管道

标签（空格分隔）： python

---

因为实现很简单, 所以就把代码贴过来:
```
class P(object):
    def __init__(self, f):
        self.f = f

    def __ror__(self, y):
        return self.f(y)
```
使用示例如下:
```
输入命令:"423423" | P(int) | P(hex) | P(str.upper)
结果:'0X675FF'
```
解释:
`|`符号在`python`里是"位或"操作符, 这里用一个类`P`来实现`|`操作符的重载(学过C++的人应该知道C++里的操作符的重载吧), 也就是重新实现 `__ror__` 函数

上面的例子说的是 将字符串`"423423"` 先执行`int`操作, 然后再执行`hex`函数操作, 再大写, 也就是等价于:
`str.upper(hex(int("423423")))`

类似于`str.upper(hex(int("423423")))` 这种语法形式的称之为__前缀式语法__, 也就是说语法函数这些东西在参数的前面

它执行的时候是先执行最里面的那部分, 类似与一个洋葱, 一层一层包裹, 看括号就看出来了





